\section{Hex editors και Επαναχρησιμοποίηση Κώδικα}
Στην συγκεκριμένη ενότητα θα παρουσιαστεί και θα μελετηθεί μια συλλογή από hex editor τα οποία κυκλοφορούν στο διαδίκτυο όπως και θα αναλυθούν τρία επιστημονικά άρθρα περί ανίχνευσης επαναχρησιμοποίησης κώδικα.

Τα δυαδικά προγράμματα επεξεργασίας κειμένων ή αλλιώς hex editors αποτελούν εφαρμογές για την τροποποίηση και την κατανόηση προγραμμάτων τα οποία έχουν μεταφραστεί σε γλώσσα μηχανής.
H ονομασία "hex" (hexadecimal) ή δεκαεξαδικό είναι σύστημα αρίθμησης με βάση το δεκαέξι.
Περιέχει τους βασικούς αριθμούς 0-9 και τα γράμματα A-F.
Το συγκεκριμένο σύστημα αρίθμησης χρησιμοποιείται ευρέως καθώς αντιπροσωπεύει σε πολύ καλό βαθμό τις δυαδικά κωδικοποιημένες τιμές \emph{(binary-coded values)}.
Υπάρχουν ποικίλες υλοποιήσεις των συγκεκριμένων προγραμμάτων με έμφαση σε διαφορετικά σενάρια.

Το παρόν κεφάλαιο θα μελετήσει τις λειτουργίες και τα χαρακτηριστικά των διορθωτών που υπάρχουν στο διαδίκτυο σαν \emph{freeware}, \emph{free and open source} αλλά και \emph{commercial}.
Επίσης θα θέσει μια κατευθυντήρια γραμμή με βάση τις απαιτήσεις και τις λειτουργίες στην οποία θα βασιστεί ο καινούργιος διορθωτής hex.

\pagebreak
\subsection{HxD Editor}
Το \emph{HxD Hex Editor}\cite{hxd} είναι ένας επεξεργαστής που διανέμεται ελεύθερα \emph{(freeware)} και έχει σχεδιαστεί για την πλατφόρμα των \emph{Windows}.
Από την γραφική διεπαφή μπορεί να αλλάξει ο εκάστοτε χρήστης την κωδικοποίηση μεταξύ πολλών κωδικοποιήσεων 8-bit.
Από τις βασικές λειτουργίες, ο επεξεργαστής υποστηρίζει τις κλασσικές λειτουργίες τέτοιου είδους προγραμμάτων όπως: αντιγραφή, επικόλληση, εύρεση και αντικατάσταση ή μετάβαση στη διεύθυνση.
Όπως φαίνεται και από το σχήμα \textbf{\ref{hxd}} έχει την δυνατότητα υπολογισμού των checksum.
Μπορεί επίσης να διαχειριστεί μεγάλα σε μέγεθος αρχεία ή επεξεργασία τμημάτων μνήμης ή και δίσκου, συνένωση ή διαχωρισμό αρχείων \emph{splitting - concat} όπως επίσης και στατιστικών μετρήσεων.

Ωστόσο, ο συγκεκριμένος διορθωτής υποστηρίζει σαν λειτουργικό σύστημα μόνο \emph{Windows}.
% Ενδέχεται να χρειάζεται βιβλιογραφική αναφορά
Βέβαια σε περιβάλλον \emph{linux} ή {macOS} ενδείκνυται η αξιοποίηση βιβλιοθηκών οι οποίες λειτουργούν σαν επίπεδα συμβατότητας \emph{compatibility layer} όπως το wine \emph{(Wine Is Not an Emulator)} και το \emph{crossover} ή το {bootcamp} αντίστοιχα.

Τέλος ο συγκεκριμένος editor διαθέτει πολλές μεταφράσεις σε ξένες γλώσσες και μια από αυτές είναι η ελληνική η οποία δεν είναι ολοκληρωμένη.

\begin{figure}[ht]
\centering
\includegraphics[scale=0.5]{static/hxd.png}
\caption{HxD - Freeware Hex Editor and Disk Editor}
\label{hxd}
\end{figure}

\pagebreak
\subsection{Hexed.it}
Το \emph{hexed.it}\cite{hexedit} είναι ένας free hex editor ο οποίος λειτουργεί σαν web app στον περιηγητή ιστού.
Αυτός ο \emph{editor} προσφέρει και λειτουργία χωρίς σύνδεση στο διαδίκτυο καθώς όλο το εκτελέσιμο τρέχει από την μεριά του χρήστη \emph{(client side execution)}.

Επιτελεί και αυτός τις βασικές λειτουργίες ενός hex editor όπως εισαγωγή, αντικατάσταση, αναζήτηση συγκεκριμένης διεύθυνσης \emph{(goto)}, απεριόριστα \emph{undo-redo} οριοθετημένα από τις δυνατότητες του εκάστοτε περιηγητή.
Ακόμα είναι ικανό να ανοίγει μεγάλα αρχεία της τάξης των \emph{gigabyte} ακόμα και αν δεν υπάρχει διαθέσιμη μνήμη ram και να αναγνωρίζει την πλειοψηφία από τους τύπους αρχείων που κυκλοφορούν.
Επίσης έχει την δυνατότητα της επιθεώρησης δεδομένου (data inspection) όπως φαίνεται και στο σχήμα \textbf{\ref{hexedit}} στην αριστερή στήλη σε κάθε μεμονωμένο byte και ο χρήστης να βλέπει την τιμή του σε 8,16,32,64-bit αναπαράσταση.

\begin{figure}[ht]
\centering
\includegraphics[scale=0.5]{static/hexedit.png}

\caption{HexEd.it: A full featured HTML5/javascript-based hex editor running directly from your browser}
\label{hexedit}
\end{figure}

\pagebreak
\subsection{wxHexEditor}
Το wxHexEditor\cite{wxhex} είναι ένα πρόγραμμα επεξεργασίας (hex editor) ανοιχτού κώδικα με μεγάλη υποστήριξη αρχείων. 
Η γραφική διεπαφή επιτρέπει στον χρήστη να επιλέξει μεταξύ διαφορετικών κωδικοποιήσεων, από ASCII έως UTF παραλλαγές.
Ωστόσο, η επεξεργασία κειμένου είναι δυνατή μόνο σε κωδικοποίηση ASCII.
Ο συντάκτης περιλαμβάνει έναν μεταγλωττιστή δεδομένων με υποστήριξη για βασικούς τύπους δεδομένων και εναλλαγή endianity.
Εκτός από αυτές τις λειτουργίες, προσφέρει επίσης τη δυνατότητα σήμανσης τμημάτων δεδομένων χρησιμοποιώντας ετικέτες,ανάγνωση δεδομένων ως εντολές assembly όπως φαίνεται στο σχήμα \tetbf{\ref{wx}} δεξιά μεριά, ανάγνωση δεδομένων από μνήμη (ram) συγκεκριμένης διαδικασίας.

Ένα άλλο πλεονέκτημα αυτού του προγράμματος επεξεργασίας είναι η διαθεσιμότητα μεταφράσεων σε ξένες γλώσσες.
Το wxHexEditor υποστηρίζει πλατφόρμες \emph{MS Windows, Mac OS και Linux}.
Παρά τον μεγάλο αριθμό λειτουργιών , ο editor βρίσκεται ακόμη σε έκδοση beta και μπορεί να χρησιμοποιηθεί, απλώς αντιμετωπίζει προβλήματα σταθερότητας.

\begin{figure}[ht]
\centering
\includegraphics[scale=0.5]{static/wxhex.png}
\caption{wxHedEditor}
\label{wx}
\end{figure}

\pagebreak
\subsection{rehex: Reverse Engineer's hex editor}
Το \emph{rehex} \cite{rehex} είναι ένας σύγχρονος hex editor ανοιχτού και ελεύθερου λογισμικού.
H αρχική σελίδα του λογισμικού δίνει την περιγραφή ως `\emph{Ένας hex editor πολλαπλών πλατφορμών (Windows, Linux, Mac) για reverse engineering και οτιδήποτε άλλο}`.

Ο συγκεκριμένος editor διαθέτει αρκετά παρόμοιες λειτουργίες με την λίστα των editor που έχουμε περιγράψει έως τώρα.
Όπως φαίνεται από το σχήμα \textbf{\ref{rehex}} έχει την δυνατότητα της επιθεώρησης δεδομένου σε κάθε μεμονωμένο byte και ο χρήστης να βλέπει την τιμή του σε 8,16,32,64-bit αναπαράσταση.
Σημαντικό χαρακτηριστικό που τον αναδεικνύει από τους προηγούμενους είναι η δυνατότητα που έχει ο χρήστης για \emph{inline dissasembly} της γλώσσας μηχανής.
Διαθέτει και αυτός υποστήριξη για μεγάλα αρχεία της τάξης του 1TB+ όπως επίσης και την δυνατότητα scripting με κάποια γλώσσα προγραμματισμού.

\begin{figure}[ht]
\centering
\includegraphics[scale=0.5]{static/rehex.png}
\caption{rehex: Reverse Engineer's hex editor}
\label{rehex}
\end{figure}

\pagebreak
\subsection{Περίληψη λειτουργιών}
Ο παρακάτω πίνακας συγκρίνει τις λειτουργίες που αναφέρθηκαν στο πρώτο κεφάλαιο αλλά και κάποιες παραπάνω των hex editor.
Κάθε λειτουργία θα σημειώνεται με ενα \times\space όταν περιέχεται στον editor και ένα - όταν όχι.

\begin{table}[h!]
\centering
\begin{tabular}{|c|c c  c  c|} 
    \hline
    Λειτουργίες & HxD & HexEd.it & wxHexEditor & Rehex \\ [0.5ex] 
    \hline
    Αντιγραφή και επικόλληση    & \times & \times & \times & \times \\ 
    Βρίσκω και αντικαθιστώ      & \times & \times & \times & \times \\
    Κάνε πίσω                   & \times & \times & \times & \times \\
    Υποστήριξη μεγάλων αρχείων  & \times & \times & \times & \times \\
    Μεταγλωττιστής δεδομένων    & - & \times & \times & \times \\
    Αναγνώριση μορφής           & - & - & \times & \times \\
    Go to                       & \times & \times & \times & \times \\
    Inline disassembly          & \times & \times & \times & \times \\
    
    \hline
\end{tabular}
\caption{Λειτουργίες hex editor}
\end{table}

Συμπερασματικά, με βάση τους στόχους και τις λειτουργίες που είχαμε ορίσει στις απαιτήσεις του προγράμματος διαπιστώνουμε ότι από τους τέσσερις μόνο οι δυο hex editor υποστηρίζουν την λειτουργικότητα αναγνώρισης μορφής αρχείου.


Η προγραμματιστική υλοποίηση της πτυχιακής βασίστηκε και πραγματοποιήθηκε με την βοήθεια ενός text editor του kilo\cite{kilo}.
H συγκεκριμένη επιλογή έγινε αφενός από την αρκετά ολοκληρωμένη τεκμηρίωση του κώδικα (\emph{documentation}) αφετέρου από την επιλογή της γλώσσας προγραμματισμού την \textbf{C} που επιλέχθηκε για να γραφτεί ο \emph{text editor}.
Επίσης ο συγκεκριμένος \emph{text editor} στοχεύει το τερματικό το οποίο αποτελεί μια πρoϋπόθεση για τον \emph{hex editor} της πτυχιακής.
Σε αντίθεση με τους hex editor που αναλύθηκαν και διαθέτουν μόνο γραφική διεπαφή GUI.
Περιέχει αρκετά χρήσιμες \emph{non-trivial} συναρτήσεις που αφορούν την εύκολη αλληλεπίδραση με το περιβάλλον του τερματικού τις οποίες δανείστηκε η υλοποίηση μου.

Υπάρχει και μια άλλη λειτουργικότητα προς υλοποίηση, η ανίχνευση επαναχρησιμοποίησης κώδικα \textbf{binary code reuse detection}. Για την επαναχρησιμοποίηση κώδικα πρέπει να στραφεί η προσοχή σε αλγόριθμους που έχουν αυτά τα χαρακτηριστικά. Συγκεκριμένα, επιλέχθηκαν τρεις επιστημονικές αναφορές που θα περιγραφούν παρακάτω. 

\pagebreak
\include{stateofart}
\pagebreak
